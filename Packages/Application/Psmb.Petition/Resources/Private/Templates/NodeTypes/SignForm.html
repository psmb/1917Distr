<div id="petition-whole-form">
	<div field="text" class="t-text t-text_md paddingVertical-single textAlign-center"><strong>Я готов присоединиться:</strong></div>
	<div id="rec14606606" class="r r_anim r_showed" style="padding-top:0px;padding-bottom:54px; " data-record-type="214">
		<div class="t186B">
			<form method="post" name="form14606606" id="petition-form" action="https://cors-anywhere.herokuapp.com/https://docs.google.com/forms/d/e/1FAIpQLSdsjl5ffpWiYh6V1pwD1r6b3Kva4nHRfavhYdK9_mDgdliZZA/formResponse?embedded=true">
				<div>
					<div id="petition-form-error" style="display: none; color: red;" class="t-text t-text_md">Введите ваше имя</div>
				</div>
				<div class="row">
					<div class="small-12 medium-4 columns paddingVertical-single">
						<input name="entry.1323080770" placeholder="Имя и фамилия" class="t186B__input t-input js-tilda-rule" id="petition-form-name" style="color:#000000; border:1px solid #adadad; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px;" type="text">
					</div>
					<div class="small-12 medium-4 columns paddingVertical-single">
						<input name="entry.2100953900" placeholder="E-mail" class="t186B__input t-input js-tilda-rule" style="color:#000000; border:1px solid #adadad; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px;" type="text">
					</div>
					<div class="small-12 medium-4 columns paddingVertical-single">
						<input name="entry.1605820056" placeholder="Город" class="t186B__input t-input js-tilda-rule" style="color:#000000; border:1px solid #adadad; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px;" type="text">
					</div>
				</div>
	      <div class="row">
	        <div class="small-12 medium-8 columns paddingVertical-single">
	          <input name="entry.748078479" placeholder="Почему для вас важно присоединиться к акции" class="t186B__input t-input js-tilda-rule" style="color:#000000; border:1px solid #adadad; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px;" type="text">
	        </div>
	        <div class="small-12 medium-4 columns paddingVertical-single">
	          <input name="entry.16605890" placeholder="Немного о себе" class="t186B__input t-input js-tilda-rule" style="color:#000000; border:1px solid #adadad; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px;" type="text">
	        </div>
	      </div>
	      <div class="row paddingVertical-single">
	        <div class="columns">
	          <input class="t-submit" style="width: 100%; color:#ffffff;background-color:#eb443c;border-radius:0px; -moz-border-radius:0px; -webkit-border-radius:0px;" type="submit" name="" value="Присоединиться">
	        </div>
	      </div>
			</form>
		</div>
		<style>
			#rec14606606 input::-webkit-input-placeholder {
				color: #000000;
				opacity: 0.5;
			}
			#rec14606606 input::-moz-placeholder {
				color: #000000;
				opacity: 0.5;
			}
			#rec14606606 input:-moz-placeholder {
				color: #000000;
				opacity: 0.5;
			}
			#rec14606606 input:-ms-input-placeholder {
				color: #000000;
				opacity: 0.5;
			}
		</style>
	</div>
</div>

<div class="Modal" style="display:none" id="petition-modal">
	<div class="Modal-bg" style="background-color:black;opacity:0.8;position:fixed; height:100%;top:0;left:0;right:0;z-index:1000"></div>

	<div class="t203" style="position:fixed; z-index: 1001; width:80%; max-width: 720px; position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);">
		<div class="t203__textwrapper" style="position: relative" >
			<div id="petition-modal-close" style="width: 30px; height: 30px; position: absolute; top: 12px; right: 12px; cursor: pointer; z-index: 1002;">
				<svg viewbox="0 0 40 40">
					<path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" />
				</svg>
			</div>
			<div class="t203__title t-title t-title_xs" field="title">Благодарим вас за участие</div>
			<div class="t203__text t-text t-text_md" field="text">
				После премодерации ваша подпись появится на сайте.
				<br>
				<br> Вы можете поделиться информацией об акции в своих социальных сетях:
				<br>
				<br>
				<a class="Button" target="_blank" href="https://www.facebook.com/dialog/feed?%20display=popup&app_id=180260039130446&link=https%3A%2F%2Fpokayanie1917.ru">Поделиться&nbsp;в&nbsp;Facebook</a>
				<a class="Button" target="_blank" href="https://vk.com/share.php?url=https://pokayanie1917.ru">Рассказать&nbsp;ВКонтакте</a>
			</div>
		</div>
	</div>
</div>
<style>
.Button {
	color:#ffffff;
	background-color:#eb443c;
	padding: 12px;
	font-weight: bold;
	display: inline-block;
	margin-top: 12px;
	margin-right:12px
}
.close-x {
  stroke: #444;
  fill: transparent;
  stroke-linecap: round;
  stroke-width: 5;
}
</style>

<script>
var petitionFormClose = document.getElementById('petition-modal-close');
var wholePetition = document.getElementById('petition-whole-form');
var petitionForm = document.getElementById('petition-form');
petitionFormClose.addEventListener('click', petitionCloseDialog);
petitionForm.addEventListener('submit', submitForm, false);
document.addEventListener('keydown', function (event) {
	if (event.which === 27) {
		petitionCloseDialog();
	}
}.bind(this));

function petitionCloseDialog() {
	document.getElementById('petition-modal').style.display = 'none';
}

function submitForm (e) {
	e.preventDefault();
	var nameField = document.getElementById('petition-form-name');
	var error = document.getElementById('petition-form-error');
	if(!nameField.value) {
		nameField.style.border = '2px solid red';
		error.style.display = 'block';
		return;
	}
	nameField.style.border = '1px solid #adadad';
	error.style.display = 'none';
	var request = new XMLHttpRequest();
	request.open('POST', petitionForm.action);
	request.onload = function () {
		wholePetition.innerHTML = '<div class="paddingVertical-triple t-text t-text_md" style="font-weight: bold; color: #eb443c;">Благодарим вас за участие в акции. Ваша подпись появится ниже после премодерации.</div>';
		document.getElementById('petition-modal').style.display = 'block';
	};
	request.send(new FormData(petitionForm));
}
</script>
